{"version":3,"sources":["webpack://infinite-scroller/./src/main.js"],"names":[],"mappings":";;;;;AAAA;AACA,gBAAgB,6CAAsB;AACtC,qEAAqE,QAAQ,SAAS,MAAM;;AAE5F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED","file":"bundle.js","sourcesContent":["let count = 5;\nconst API_KEY = process.env.ACCESS_KEY;\nconst API_URL = `https://api.unsplash.com/photos/random/?client_id=${API_KEY}&count=${count}`;\n\nlet ready = false;\nlet imagesLoaded = 0;\nlet totalImages = 0;\nlet photosArray = [];\n\nconst setAttributes = (element, attributes) => {\n  for (const key in attributes) {\n    element.setAttribute(key, attributes[key]);\n  }\n}\n\nconst imageLoaded = () => {\n  const loader = document.querySelector('.loader');\n  imagesLoaded++;\n  ready = imagesLoaded === totalImages ? true : false;\n  loader.hidden = true;\n  count = 30;\n};\n\nconst displayPhotos = () => {\n  const imageContainer = document.querySelector('.image-container');\n\n  totalImages = photosArray.length;\n  imagesLoaded = 0;\n\n  photosArray.forEach(photo => {\n    // Create <a> to link to Unsplash\n    const imageLink = document.createElement('a');\n    setAttributes(imageLink, {\n      href: photo.urls.regular,\n      target: '_blank',\n      rel: 'noreferrer'\n    })\n\n    // Create <img> for photo\n    const image = document.createElement('img');\n    setAttributes(image, {\n      src: photo.urls.regular,\n      alt: photo.alt_description,\n      title: photo.alt_description\n    })\n\n    image.addEventListener('load', imageLoaded);\n    // Append created elements to the DOM\n    imageLink.appendChild(image);\n    imageContainer.appendChild(imageLink);\n  });\n};\n\nconst getPhotos = async () => {\n  try {\n    const response = await fetch(API_URL);\n    photosArray = await response.json();\n    displayPhotos();\n  } catch (error) {\n    // Catch Error Here\n  }\n};\n\nwindow.addEventListener('scroll', () => {\n  if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 1000 && ready) {\n    ready = false;\n    getPhotos();\n  }\n});\n\ngetPhotos();\n\n"],"sourceRoot":""}